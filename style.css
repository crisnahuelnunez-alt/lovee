:root {
    --bg-color: #0c0a0f;
    --text-color: #f0e8f8;
    --accent-color: #e88ab2;
    --shadow-color: rgba(232, 138, 178, 0.5);
    --font-heading: 'Great Vibes', cursive;
    --font-body: 'Raleway', sans-serif;
    --font-lyrics: 'Montserrat', sans-serif;
}

body {
    background: linear-gradient(#0007, #0000), var(--bg-color);
    margin: 0;
    height: 100vh;
    overflow: hidden;
    color: var(--text-color);
    font-family: var(--font-body);
    user-select: none;
}

#particle-canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1}
.hidden{display:none!important}

/* --- ESTILOS DEL ROMPECABEZAS (MOBILE) --- */
#inicio{display:flex;justify-content:center;align-items:center;height:100vh;position:relative;z-index:3;padding:1rem;box-sizing:border-box}
#puzzle-wrapper{text-align:center;background:rgba(0,0,0,.3);padding:1rem 1.5rem;border-radius:20px;width:100%;max-width:400px}
#puzzle-wrapper h1{font-family:var(--font-body);font-weight:300;font-size:clamp(1rem,4.5vw,1.5rem);margin-bottom:20px;color:var(--accent-color)}
#puzzle-container{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr);border:2px solid var(--accent-color);border-radius:10px;background-color:rgba(0,0,0,.2);margin:0 auto 20px auto;width:80vw;max-width:300px;aspect-ratio:1/1}
.puzzle-slot{width:100%;height:100%;box-sizing:border-box;background-image:url(assets/foto5.jpg);background-size:300% 300%}
.puzzle-slot.empty{background-image:none;border:2px dashed rgba(255,255,255,.3)}
#puzzle-pieces{display:flex;justify-content:center;align-items:center;min-height:calc(26.6vw + 10px);max-height:110px}
.puzzle-piece{width:26.6vw;height:26.6vw;max-width:100px;max-height:100px;background-image:url(assets/foto5.jpg);background-size:300% 300%;cursor:grab;transition:transform .2s ease,box-shadow .2s ease;border-radius:5px;border:1px solid var(--accent-color)}
.puzzle-piece:hover{transform:scale(1.1);box-shadow:0 0 15px var(--shadow-color)}
.puzzle-piece.dragging{cursor:grabbing;opacity:.5}

/* --- PANTALLA DE SORPRESA --- */
#sorpresa{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;position:relative;z-index:2;animation:fadeIn 2s ease;padding:1rem;box-sizing:border-box}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}

/* --- NUEVO ESTILO: Contador de tiempo --- */
#contador-container {
    width: 100%;
    text-align: center;
    padding: 10px 0;
    margin-bottom: 20px; /* Espacio entre el contador y el marco */
    color: var(--accent-color);
    font-family: var(--font-body);
    font-size: clamp(1rem, 4vw, 1.5rem);
    text-shadow: 0 0 10px var(--shadow-color);
    z-index: 10;
}

#marco-ritmico{position:relative;padding:10px;border-radius:20px;transition:box-shadow .1s ease-out,transform .1s ease-out}
.marco-magico{width:90vw;position:relative;z-index:3;box-shadow:0 0 40px rgba(0,0,0,.8);border-radius:15px;padding-bottom:56.25%;height:0}
.pantalla{position:absolute;top:0;left:0;width:100%;height:100%;background:#000;border-radius:15px;overflow:hidden}
#background-slideshow{position:absolute;width:100%;height:100%;background-size:cover;background-position:center;animation:kenburns 35s infinite}
@keyframes kenburns{0%{background-image:url(assets/foto1.jpg);transform:scale(1);opacity:1}18%{transform:scale(1.05)}20%{opacity:0}20.1%{background-image:url(assets/foto2.jpg);transform:scale(1);opacity:1}38%{transform:scale(1.05)}40%{opacity:0}40.1%{background-image:url(assets/foto3.jpg);transform:scale(1);opacity:1}58%{transform:scale(1.05)}60%{opacity:0}60.1%{background-image:url(assets/foto4.jpg);transform:scale(1);opacity:1}78%{transform:scale(1.05)}80%{opacity:0}80.1%{background-image:url(assets/foto5.jpg);transform:scale(1);opacity:1}98%{transform:scale(1.05)}100%{opacity:0}}

/* --- ESTILO CORREGIDO: Recuadro para las letras --- */
.letras-recuadro{position:absolute;bottom:0;left:0;width:100%;background-color:rgba(0,0,0,.6);padding:1rem .5rem;box-sizing:border-box;text-align:center;border-bottom-left-radius:15px;border-bottom-right-radius:15px;display:flex;align-items:center;justify-content:center;min-height:80px;backdrop-filter:blur(3px)}
#letras{font-family:var(--font-lyrics);font-weight:700;font-size:clamp(1rem,4.5vw,1.8rem);text-transform:uppercase;color:rgba(255,255,255,.4);position:relative;display:inline-block;padding:0;margin:0;transition:all .5s ease;opacity:0;line-height:1.3}
#letras::before{content:attr(data-text);position:absolute;top:0;left:0;width:0;height:100%;color:#fff;-webkit-text-stroke:1px rgba(0,0,0,.5);overflow:hidden;transition:width var(--karaoke-duration, .5s) linear}
#letras.visible{opacity:1}
#letras.visible::before{width:100%}

#mensaje-final{position:absolute;width:100%;height:100%;background:radial-gradient(circle,rgba(18,14,22,.8) 0,rgba(18,14,22,1) 80%);display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;animation:fadeIn 2s;z-index:5}
#mensaje-final h1{font-family:var(--font-heading);font-size:clamp(2.5rem,12vw,5rem);color:var(--accent-color);margin:0}
#mensaje-final p{font-size:clamp(1rem,4vw,1.5rem);font-weight:300;margin-top:10px}
#fireworks-container{position:fixed;top:0;left:0;width:100%;height:100%;z-index:2;pointer-events:none}
@keyframes firework{0%{transform:translate(var(--x),var(--initialY));width:var(--initialSize);opacity:1}50%{width:.5vmin;opacity:1}100%{width:var(--finalSize);opacity:0}}
.firework,.firework::before,.firework::after{--initialSize: .5vmin;--finalSize: 45vmin;--particleSize: .2vmin;--color1: #e88ab2;--color2: #f0e8f8;--color3: #fff;--y: -50%;--x: -50%;--initialY: 100vh;content:"";animation:firework 2s infinite;position:absolute;top:80%;left:50%;transform:translate(-50%,var(--y));width:var(--initialSize);aspect-ratio:1;background:radial-gradient(circle,var(--color1) var(--particleSize),transparent 0) 50% 0,radial-gradient(circle,var(--color2) var(--particleSize),transparent 0) 100% 50%,radial-gradient(circle,var(--color3) var(--particleSize),transparent 0) 50% 100%,radial-gradient(circle,var(--color1) var(--particleSize),transparent 0) 0% 50%;background-size:var(--initialSize) var(--initialSize);background-repeat:no-repeat}
.firework::before{transform:translate(-50%,-50%) rotate(25deg)!important}
.firework::after{transform:translate(-50%,-50%) rotate(-37deg)!important}
.firework:nth-child(2){left:20%;animation-delay:-.4s}
.firework:nth-child(3){left:80%;animation-delay:-.8s}

@media(min-width:768px){.marco-magico{width:60vw;max-width:500px}}
